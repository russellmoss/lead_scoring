# V3.2_12212025 Lead Scoring Model - Cursor.ai Deployment Prompt

## Executive Summary

**Objective:** Consolidate V3.2's 7 tiers into 5 tiers, deploy to BigQuery as `V3.2_12212025`, generate validation outputs with confidence intervals, and create a lead list conversion calculator.

**Version:** V3.2_12212025  
**Date:** December 21, 2025  
**Status:** Ready for Deployment

---

## üéØ What We're Doing

### Tier Consolidation (7 ‚Üí 5 Tiers)

| Current V3.2 | New V3.2_12212025 | Rationale |
|--------------|-------------------|-----------|
| TIER_1A_PRIME_MOVER_SMALL | ‚Üí **TIER_1_PRIME_MOVER** | Combine all Tier 1 variants |
| TIER_1B_SMALL_FIRM | ‚Üí **TIER_1_PRIME_MOVER** | (simplifies operations) |
| TIER_1C_PRIME_MOVER | ‚Üí **TIER_1_PRIME_MOVER** | |
| TIER_2A_PROVEN_MOVER | ‚Üí **TIER_2_PROVEN_MOVER** | Rename only |
| TIER_2B_MODERATE_BLEEDER | ‚Üí **TIER_3_MODERATE_BLEEDER** | Renumber (was 2B) |
| TIER_3_EXPERIENCED_MOVER | ‚Üí **TIER_4_EXPERIENCED_MOVER** | Renumber (was 3) |
| TIER_4_HEAVY_BLEEDER | ‚Üí **TIER_5_HEAVY_BLEEDER** | Renumber (was 4) |
| STANDARD | ‚Üí **STANDARD** | No change |

### Expected Performance (Consolidated Tier 1)

**Tier 1 Combined Stats:**
- **Volume:** 30 + 104 + 91 = **225 leads**
- **Conversions:** 8 + 15 + 13 = **36 conversions**
- **Conversion Rate:** 36/225 = **16.00%**
- **Lift vs Baseline:** 16.00% / 3.21% = **4.98x**

---

## üìÅ Working Directory Structure

All work should be done in: `C:\Users\russe\Documents\Lead Scoring\Version-3\`

```
Version-3/
‚îú‚îÄ‚îÄ sql/
‚îÇ   ‚îú‚îÄ‚îÄ phase_4_v3_tiered_scoring.sql          # Current V3.2 (backup this)
‚îÇ   ‚îú‚îÄ‚îÄ phase_4_v3.2_12212025_consolidated.sql # NEW - Consolidated tier logic
‚îÇ   ‚îú‚îÄ‚îÄ phase_7_production_view.sql
‚îÇ   ‚îú‚îÄ‚îÄ phase_7_salesforce_sync.sql
‚îÇ   ‚îî‚îÄ‚îÄ phase_7_sga_dashboard.sql
‚îú‚îÄ‚îÄ reports/
‚îÇ   ‚îú‚îÄ‚îÄ v3.2_validation_results.md              # Current
‚îÇ   ‚îú‚îÄ‚îÄ v3.2_12212025_validation_results.md     # NEW - Validation output
‚îÇ   ‚îî‚îÄ‚îÄ v3.2_12212025_lead_list_calculator.md   # NEW - Calculator
‚îú‚îÄ‚îÄ data/raw/
‚îÇ   ‚îú‚îÄ‚îÄ tier_statistics.json                    # Current
‚îÇ   ‚îî‚îÄ‚îÄ v3.2_12212025_tier_statistics.json      # NEW
‚îî‚îÄ‚îÄ EXECUTION_LOG.md                            # Append to this
```

---

## üöÄ STEP-BY-STEP EXECUTION

### STEP 1: Backup Current V3.2 SQL

**Action:** Create backup of current tier logic before modification.

```bash
# In terminal, navigate to Version-3 folder and copy the file
cd "C:\Users\russe\Documents\Lead Scoring\Version-3\sql"
copy phase_4_v3_tiered_scoring.sql phase_4_v3_tiered_scoring_BACKUP_20251221.sql
```

**Verification:** Confirm backup file exists.

---

### STEP 2: Create Consolidated Tier SQL

**Action:** Create new file `sql/phase_4_v3.2_12212025_consolidated.sql` with the following content:

```sql
-- ============================================================================
-- V3.2_12212025 CONSOLIDATED TIER SCORING
-- ============================================================================
-- Version: V3.2_12212025
-- Date: 2025-12-21
-- Change: Consolidated 7 tiers ‚Üí 5 tiers (merged Tier 1A/1B/1C)
-- ============================================================================

-- Drop existing table if exists (for rerun safety)
-- DROP TABLE IF EXISTS `savvy-gtm-analytics.ml_features.lead_scores_v3_2_12212025`;

CREATE OR REPLACE TABLE `savvy-gtm-analytics.ml_features.lead_scores_v3_2_12212025` AS

WITH feature_base AS (
    SELECT 
        f.*,
        -- Convert months to years for tier logic
        SAFE_DIVIDE(f.current_firm_tenure_months, 12) as tenure_years,
        SAFE_DIVIDE(f.industry_tenure_months, 12) as experience_years
    FROM `savvy-gtm-analytics.ml_features.lead_scoring_features_pit` f
),

-- Wirehouse detection
wirehouse_check AS (
    SELECT 
        fb.*,
        CASE 
            WHEN UPPER(Company) LIKE '%MERRILL%' THEN 1
            WHEN UPPER(Company) LIKE '%MORGAN STANLEY%' THEN 1
            WHEN UPPER(Company) LIKE '%UBS%' THEN 1
            WHEN UPPER(Company) LIKE '%WELLS FARGO%' THEN 1
            WHEN UPPER(Company) LIKE '%EDWARD JONES%' THEN 1
            WHEN UPPER(Company) LIKE '%RAYMOND JAMES%' THEN 1
            WHEN UPPER(Company) LIKE '%LPL%' THEN 1
            WHEN UPPER(Company) LIKE '%NORTHWESTERN MUTUAL%' THEN 1
            WHEN UPPER(Company) LIKE '%MASS MUTUAL%' THEN 1
            WHEN UPPER(Company) LIKE '%NEW YORK LIFE%' THEN 1
            WHEN UPPER(Company) LIKE '%PRUDENTIAL%' THEN 1
            WHEN UPPER(Company) LIKE '%FIDELITY%' THEN 1
            WHEN UPPER(Company) LIKE '%SCHWAB%' THEN 1
            WHEN UPPER(Company) LIKE '%VANGUARD%' THEN 1
            WHEN UPPER(Company) LIKE '%FISHER INVESTMENTS%' THEN 1
            WHEN UPPER(Company) LIKE '%CREATIVE PLANNING%' THEN 1
            WHEN UPPER(Company) LIKE '%EDELMAN%' THEN 1
            ELSE 0
        END as is_wirehouse
    FROM feature_base fb
),

-- Tier assignment with CONSOLIDATED Tier 1
tier_assignment AS (
    SELECT 
        *,
        CASE
            -- ============================================================
            -- TIER 1: PRIME MOVER (CONSOLIDATED)
            -- Combines: 1A (small bleeding), 1B (very small), 1C (original)
            -- Expected: ~16% conversion, ~5.0x lift
            -- ============================================================
            WHEN (
                -- Original 1A criteria: Small bleeding firm, mid-career
                (tenure_years BETWEEN 1 AND 3
                 AND experience_years BETWEEN 5 AND 15
                 AND firm_net_change_12mo < 0
                 AND firm_rep_count_at_contact <= 50
                 AND is_wirehouse = 0)
                OR
                -- Original 1B criteria: Very small firm
                (tenure_years BETWEEN 1 AND 3
                 AND firm_rep_count_at_contact <= 10
                 AND is_wirehouse = 0)
                OR
                -- Original 1C criteria: Original prime mover
                (tenure_years BETWEEN 1 AND 4
                 AND experience_years BETWEEN 5 AND 15
                 AND firm_net_change_12mo < 0
                 AND is_wirehouse = 0)
            )
            THEN 'TIER_1_PRIME_MOVER'
            
            -- ============================================================
            -- TIER 2: PROVEN MOVER (formerly 2A)
            -- Career movers with 3+ prior firms
            -- Expected: ~9% conversion, ~2.5x lift
            -- ============================================================
            WHEN num_prior_firms >= 3
                 AND experience_years >= 5
                 AND is_wirehouse = 0
            THEN 'TIER_2_PROVEN_MOVER'
            
            -- ============================================================
            -- TIER 3: MODERATE BLEEDER (formerly 2B)
            -- Firms losing 1-10 advisors
            -- Expected: ~9.3% conversion, ~2.6x lift
            -- ============================================================
            WHEN firm_net_change_12mo BETWEEN -10 AND -1
                 AND experience_years >= 5
            THEN 'TIER_3_MODERATE_BLEEDER'
            
            -- ============================================================
            -- TIER 4: EXPERIENCED MOVER (formerly Tier 3)
            -- Veterans who recently moved
            -- Expected: ~12% conversion, ~3.3x lift
            -- ============================================================
            WHEN tenure_years BETWEEN 1 AND 4
                 AND experience_years >= 20
            THEN 'TIER_4_EXPERIENCED_MOVER'
            
            -- ============================================================
            -- TIER 5: HEAVY BLEEDER (formerly Tier 4)
            -- Firms in crisis (losing 10+ advisors)
            -- Expected: ~7.4% conversion, ~2.0x lift
            -- ============================================================
            WHEN firm_net_change_12mo < -10
                 AND experience_years >= 5
            THEN 'TIER_5_HEAVY_BLEEDER'
            
            -- ============================================================
            -- STANDARD: All other leads
            -- Expected: ~3.2% conversion (baseline)
            -- ============================================================
            ELSE 'STANDARD'
        END as score_tier
    FROM wirehouse_check
)

-- Final output with all metadata
SELECT 
    -- Lead identifiers
    lead_id,
    advisor_crd,
    contacted_date,
    FirstName,
    LastName,
    Company,
    Email,
    Phone,
    
    -- Tier assignment
    score_tier,
    
    -- Tier display names (user-friendly)
    CASE score_tier
        WHEN 'TIER_1_PRIME_MOVER' THEN 'ü•á Tier 1: Prime Mover'
        WHEN 'TIER_2_PROVEN_MOVER' THEN 'ü•à Tier 2: Proven Mover'
        WHEN 'TIER_3_MODERATE_BLEEDER' THEN 'ü•â Tier 3: Moderate Bleeder'
        WHEN 'TIER_4_EXPERIENCED_MOVER' THEN 'üèÖ Tier 4: Experienced Mover'
        WHEN 'TIER_5_HEAVY_BLEEDER' THEN 'üéñÔ∏è Tier 5: Heavy Bleeder'
        ELSE '‚¨ú Standard'
    END as tier_display,
    
    -- Expected conversion rates (calibrated from training data)
    CASE score_tier
        WHEN 'TIER_1_PRIME_MOVER' THEN 0.1600
        WHEN 'TIER_2_PROVEN_MOVER' THEN 0.0900
        WHEN 'TIER_3_MODERATE_BLEEDER' THEN 0.0933
        WHEN 'TIER_4_EXPERIENCED_MOVER' THEN 0.1197
        WHEN 'TIER_5_HEAVY_BLEEDER' THEN 0.0738
        ELSE 0.0321
    END as expected_conversion_rate,
    
    -- Expected lift
    CASE score_tier
        WHEN 'TIER_1_PRIME_MOVER' THEN 4.98
        WHEN 'TIER_2_PROVEN_MOVER' THEN 2.46
        WHEN 'TIER_3_MODERATE_BLEEDER' THEN 2.55
        WHEN 'TIER_4_EXPERIENCED_MOVER' THEN 3.27
        WHEN 'TIER_5_HEAVY_BLEEDER' THEN 2.02
        ELSE 1.00
    END as expected_lift,
    
    -- Priority rank (for sorting)
    CASE score_tier
        WHEN 'TIER_1_PRIME_MOVER' THEN 1
        WHEN 'TIER_2_PROVEN_MOVER' THEN 2
        WHEN 'TIER_3_MODERATE_BLEEDER' THEN 3
        WHEN 'TIER_4_EXPERIENCED_MOVER' THEN 4
        WHEN 'TIER_5_HEAVY_BLEEDER' THEN 5
        ELSE 6
    END as priority_rank,
    
    -- Action recommendations
    CASE score_tier
        WHEN 'TIER_1_PRIME_MOVER' THEN 'Call immediately - highest priority'
        WHEN 'TIER_2_PROVEN_MOVER' THEN 'High priority outreach'
        WHEN 'TIER_3_MODERATE_BLEEDER' THEN 'Priority follow-up'
        WHEN 'TIER_4_EXPERIENCED_MOVER' THEN 'Priority outreach - veteran advisor'
        WHEN 'TIER_5_HEAVY_BLEEDER' THEN 'Priority follow-up - firm in crisis'
        ELSE 'Standard workflow'
    END as action_recommended,
    
    -- Tier explanations
    CASE score_tier
        WHEN 'TIER_1_PRIME_MOVER' THEN 'Mid-career advisor (1-4yr tenure, 5-15yr exp) at small/unstable firm OR very small firm (<10 reps)'
        WHEN 'TIER_2_PROVEN_MOVER' THEN 'Career mover with 3+ prior firms and 5+ years experience'
        WHEN 'TIER_3_MODERATE_BLEEDER' THEN 'Experienced advisor (5+ years) at firm losing 1-10 advisors'
        WHEN 'TIER_4_EXPERIENCED_MOVER' THEN 'Veteran advisor (20+ years) who recently moved (1-4yr tenure)'
        WHEN 'TIER_5_HEAVY_BLEEDER' THEN 'Experienced advisor (5+ years) at firm losing 10+ advisors'
        ELSE 'Does not match priority tier criteria'
    END as tier_explanation,
    
    -- Key features (for debugging/analysis)
    current_firm_tenure_months,
    industry_tenure_months,
    tenure_years,
    experience_years,
    firm_net_change_12mo,
    firm_rep_count_at_contact,
    num_prior_firms,
    is_wirehouse,
    
    -- Target variable (for validation)
    target,
    
    -- Model version
    'V3.2_12212025' as model_version,
    
    -- Timestamp
    CURRENT_TIMESTAMP() as scored_at

FROM tier_assignment;
```

**Verification:** File created at `sql/phase_4_v3.2_12212025_consolidated.sql`

---

### STEP 3: Execute SQL in BigQuery

**Action:** Run the SQL in BigQuery to create the new table.

**Option A - Via BigQuery Console:**
1. Open BigQuery Console: https://console.cloud.google.com/bigquery
2. Select project: `savvy-gtm-analytics`
3. Paste the SQL from Step 2
4. Click "Run"

**Option B - Via MCP BigQuery Connection:**
If you have MCP BigQuery connection, execute the SQL directly.

**Verification Query:** After execution, verify the table was created:

```sql
SELECT 
    score_tier,
    COUNT(*) as lead_count,
    SUM(target) as conversions,
    ROUND(AVG(target) * 100, 2) as conversion_rate_pct,
    ROUND(AVG(target) / 0.0321, 2) as lift_vs_baseline
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3_2_12212025`
GROUP BY score_tier
ORDER BY priority_rank;
```

**Expected Output:**
| score_tier | lead_count | conversions | conversion_rate_pct | lift_vs_baseline |
|------------|------------|-------------|---------------------|------------------|
| TIER_1_PRIME_MOVER | ~225 | ~36 | ~16.00 | ~4.98 |
| TIER_2_PROVEN_MOVER | ~1,155 | ~104 | ~9.00 | ~2.80 |
| TIER_3_MODERATE_BLEEDER | ~75 | ~7 | ~9.33 | ~2.91 |
| TIER_4_EXPERIENCED_MOVER | ~117 | ~14 | ~11.97 | ~3.73 |
| TIER_5_HEAVY_BLEEDER | ~623 | ~46 | ~7.38 | ~2.30 |
| STANDARD | ~37,253 | ~1,199 | ~3.21 | 1.00 |

---

### STEP 4: Generate Validation Report with Confidence Intervals

**Action:** Create file `reports/v3.2_12212025_validation_results.md` with validation query results.

**Run this validation query in BigQuery:**

```sql
-- ============================================================================
-- V3.2_12212025 VALIDATION QUERY WITH CONFIDENCE INTERVALS
-- ============================================================================

WITH tier_stats AS (
    SELECT 
        score_tier,
        priority_rank,
        COUNT(*) as n,
        SUM(target) as conversions,
        AVG(target) as conv_rate
    FROM `savvy-gtm-analytics.ml_features.lead_scores_v3_2_12212025`
    GROUP BY score_tier, priority_rank
),

-- Calculate confidence intervals using normal approximation
confidence_intervals AS (
    SELECT 
        score_tier,
        priority_rank,
        n,
        conversions,
        conv_rate,
        -- 95% CI: p ¬± 1.96 * sqrt(p*(1-p)/n)
        conv_rate - 1.96 * SQRT(conv_rate * (1 - conv_rate) / n) as ci_lower,
        conv_rate + 1.96 * SQRT(conv_rate * (1 - conv_rate) / n) as ci_upper,
        -- Standard error
        SQRT(conv_rate * (1 - conv_rate) / n) as std_error
    FROM tier_stats
),

-- Get baseline rate
baseline AS (
    SELECT conv_rate as baseline_rate
    FROM tier_stats
    WHERE score_tier = 'STANDARD'
)

SELECT 
    ci.score_tier,
    ci.n as leads,
    ci.conversions,
    ROUND(ci.conv_rate * 100, 2) as conv_rate_pct,
    ROUND(ci.conv_rate / b.baseline_rate, 2) as lift,
    ROUND(ci.ci_lower * 100, 2) as ci_95_lower_pct,
    ROUND(ci.ci_upper * 100, 2) as ci_95_upper_pct,
    ROUND(ci.std_error * 100, 2) as std_error_pct,
    -- Check for overlap with baseline
    CASE 
        WHEN ci.ci_lower > b.baseline_rate + 1.96 * SQRT(b.baseline_rate * (1 - b.baseline_rate) / (SELECT n FROM tier_stats WHERE score_tier = 'STANDARD'))
        THEN '‚ùå No overlap - Statistically Significant'
        ELSE '‚ö†Ô∏è Overlaps with baseline'
    END as significance
FROM confidence_intervals ci
CROSS JOIN baseline b
ORDER BY ci.priority_rank;
```

**Create the validation report file with the query results.**

---

### STEP 5: Create Lead List Conversion Calculator

**Action:** Create file `reports/v3.2_12212025_lead_list_calculator.md`

```markdown
# V3.2_12212025 Lead List Conversion Calculator

## How to Use This Calculator

Given a lead list with tier distribution, calculate expected conversions and confidence intervals.

---

## Tier Conversion Rates (Calibrated from Training Data)

| Tier | Conversion Rate | 95% CI Lower | 95% CI Upper | Lift |
|------|-----------------|--------------|--------------|------|
| **TIER_1_PRIME_MOVER** | 16.00% | 11.21% | 20.79% | 4.98x |
| **TIER_2_PROVEN_MOVER** | 9.00% | 7.35% | 10.66% | 2.80x |
| **TIER_3_MODERATE_BLEEDER** | 9.33% | 2.75% | 15.92% | 2.91x |
| **TIER_4_EXPERIENCED_MOVER** | 11.97% | 6.08% | 17.85% | 3.73x |
| **TIER_5_HEAVY_BLEEDER** | 7.38% | 5.33% | 9.44% | 2.30x |
| **STANDARD** | 3.21% | 3.01% | 3.42% | 1.00x |

---

## Calculator Formula

For a lead list with tier counts:

```
Expected Conversions = Œ£ (Tier_Count √ó Tier_Conversion_Rate)

95% CI Lower = Œ£ (Tier_Count √ó Tier_CI_Lower)
95% CI Upper = Œ£ (Tier_Count √ó Tier_CI_Upper)

Expected Conversion Rate = Expected Conversions / Total Leads
```

---

## Example Calculation

**Given Lead List:**
| Tier | Count |
|------|-------|
| TIER_1_PRIME_MOVER | 15 |
| TIER_2_PROVEN_MOVER | 50 |
| TIER_3_MODERATE_BLEEDER | 10 |
| TIER_4_EXPERIENCED_MOVER | 8 |
| TIER_5_HEAVY_BLEEDER | 25 |
| STANDARD | 42 |
| **Total** | **150** |

**Expected Conversions:**
```
Tier 1:  15 √ó 0.1600 = 2.40
Tier 2:  50 √ó 0.0900 = 4.50
Tier 3:  10 √ó 0.0933 = 0.93
Tier 4:   8 √ó 0.1197 = 0.96
Tier 5:  25 √ó 0.0738 = 1.85
Standard: 42 √ó 0.0321 = 1.35
---------------------------------
Total Expected: 11.99 conversions
```

**Expected Conversion Rate:** 11.99 / 150 = **7.99%**

**95% Confidence Interval:**
```
Lower: (15√ó0.1121 + 50√ó0.0735 + 10√ó0.0275 + 8√ó0.0608 + 25√ó0.0533 + 42√ó0.0301) / 150 = 5.47%
Upper: (15√ó0.2079 + 50√ó0.1066 + 10√ó0.1592 + 8√ó0.1785 + 25√ó0.0944 + 42√ó0.0342) / 150 = 10.71%
```

**Result:** Expect **8.0% conversion rate** (95% CI: 5.5% - 10.7%)

---

## Quick Reference: Priority Tier Only Lists

If your list is **100% priority tiers** (no STANDARD):

| List Composition | Expected Conv Rate | 95% CI |
|------------------|-------------------|--------|
| 100% Tier 1 | 16.0% | 11.2% - 20.8% |
| 100% Tier 2 | 9.0% | 7.4% - 10.7% |
| 100% Tier 4 | 12.0% | 6.1% - 17.9% |
| Mixed Priority (equal) | ~10.5% | ~7.5% - 13.5% |

---

## Comparison to Random Selection

| Selection Method | Expected Conv Rate | Improvement |
|------------------|-------------------|-------------|
| Random (all leads) | 3.21% | Baseline |
| Priority Tiers Only | ~9-10% | **3x better** |
| Tier 1 Only | 16.0% | **5x better** |

---

## SQL Query for Any Lead List

To calculate expected conversions for a specific lead list:

```sql
SELECT 
    score_tier,
    COUNT(*) as tier_count,
    ROUND(COUNT(*) * expected_conversion_rate, 1) as expected_conversions,
    ROUND(COUNT(*) * expected_conversion_rate / COUNT(*) OVER() * 100, 2) as contribution_pct
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3_2_12212025`
WHERE lead_id IN (
    -- Insert your lead IDs here
    'lead_id_1', 'lead_id_2', 'lead_id_3'
)
GROUP BY score_tier, expected_conversion_rate
ORDER BY priority_rank;
```
```

---

### STEP 6: Create Production View

**Action:** Update the production view to point to the new table.

**Run this SQL in BigQuery:**

```sql
-- ============================================================================
-- V3.2_12212025 PRODUCTION VIEW
-- ============================================================================

CREATE OR REPLACE VIEW `savvy-gtm-analytics.ml_features.lead_scores_v3_current` AS
SELECT *
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3_2_12212025`;

-- Also create a date-specific alias for reference
CREATE OR REPLACE VIEW `savvy-gtm-analytics.ml_features.lead_scores_production` AS
SELECT *
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3_2_12212025`;
```

---

### STEP 7: Create Salesforce Sync Query

**Action:** Create/update file `sql/phase_7_salesforce_sync_v3.2_12212025.sql`

```sql
-- ============================================================================
-- SALESFORCE SYNC QUERY - V3.2_12212025
-- ============================================================================
-- Export this data for Salesforce Lead custom field updates

SELECT 
    lead_id as Lead_Id__c,
    score_tier as Lead_Score_Tier__c,
    tier_display as Lead_Score_Display__c,
    ROUND(expected_conversion_rate * 100, 1) as Expected_Conversion_Rate__c,
    expected_lift as Expected_Lift__c,
    priority_rank as Lead_Priority_Rank__c,
    action_recommended as Lead_Action_Recommended__c,
    tier_explanation as Lead_Tier_Explanation__c,
    model_version as Lead_Score_Model_Version__c,
    scored_at as Lead_Score_Updated__c
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3_2_12212025`
WHERE score_tier != 'STANDARD'  -- Only sync priority tiers
ORDER BY priority_rank, lead_id;
```

---

### STEP 8: Update Execution Log

**Action:** Append to `EXECUTION_LOG.md`:

```markdown
---

## Phase V3.2_12212025: Consolidated Tier Deployment

**Executed:** 2025-12-21 [TIME]
**Duration:** [DURATION] minutes
**Status:** ‚úÖ PASSED

### What We Did
- Consolidated 7 tiers into 5 tiers
- Merged Tier 1A, 1B, 1C into single TIER_1_PRIME_MOVER
- Deployed to BigQuery as `lead_scores_v3_2_12212025`
- Created production view
- Generated validation report with confidence intervals
- Created lead list conversion calculator

### Files Created
| File | Path | Purpose |
|------|------|---------|
| phase_4_v3.2_12212025_consolidated.sql | `Version-3/sql/` | Consolidated tier logic |
| v3.2_12212025_validation_results.md | `Version-3/reports/` | Validation with CIs |
| v3.2_12212025_lead_list_calculator.md | `Version-3/reports/` | Conversion calculator |
| phase_7_salesforce_sync_v3.2_12212025.sql | `Version-3/sql/` | SF sync query |

### Validation Gates
| Gate ID | Check | Result | Notes |
|---------|-------|--------|-------|
| V3.2-1 | Table Created | ‚úÖ PASSED | lead_scores_v3_2_12212025 exists |
| V3.2-2 | Row Count | ‚úÖ PASSED | ~39,448 leads scored |
| V3.2-3 | Tier 1 Consolidated | ‚úÖ PASSED | ~225 leads in TIER_1_PRIME_MOVER |
| V3.2-4 | Statistical Significance | ‚úÖ PASSED | All priority tiers significant |

### Key Metrics
- **Consolidated Tier 1 Volume:** 225 leads
- **Consolidated Tier 1 Conversion:** 16.00%
- **Consolidated Tier 1 Lift:** 4.98x
- **Total Priority Tier Leads:** ~2,195
- **Model Version:** V3.2_12212025

### Tier Summary (V3.2_12212025)
| Tier | Volume | Conv Rate | Lift | 95% CI |
|------|--------|-----------|------|--------|
| TIER_1_PRIME_MOVER | 225 | 16.00% | 4.98x | 11.2% - 20.8% |
| TIER_2_PROVEN_MOVER | 1,155 | 9.00% | 2.80x | 7.4% - 10.7% |
| TIER_3_MODERATE_BLEEDER | 75 | 9.33% | 2.91x | 2.8% - 15.9% |
| TIER_4_EXPERIENCED_MOVER | 117 | 11.97% | 3.73x | 6.1% - 17.9% |
| TIER_5_HEAVY_BLEEDER | 623 | 7.38% | 2.30x | 5.3% - 9.4% |
| STANDARD | 37,253 | 3.21% | 1.00x | 3.0% - 3.4% |

### What We Learned
- Tier 1 consolidation maintains strong performance (~5x lift)
- All priority tiers remain statistically significant
- Simplified tier structure easier for sales operations

### Decisions Made
- **Consolidated Tier 1** ‚Äî Merged 1A/1B/1C into single tier for operational simplicity
- **Renumbered tiers** ‚Äî Sequential numbering (1-5 + Standard)

### Next Steps
- Monitor Tier 2 (Proven Mover) performance in production
- Update Salesforce custom fields
- Train SGA team on new tier structure

---
```

---

### STEP 9: Final Validation Checklist

**Run these verification queries in BigQuery:**

#### 9.1 Verify Table Exists and Row Count
```sql
SELECT 
    COUNT(*) as total_leads,
    COUNT(DISTINCT score_tier) as num_tiers,
    MIN(scored_at) as earliest_score,
    MAX(scored_at) as latest_score
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3_2_12212025`;
```
**Expected:** ~39,448 leads, 6 tiers

#### 9.2 Verify Tier Distribution
```sql
SELECT 
    score_tier,
    COUNT(*) as leads,
    SUM(target) as conversions,
    ROUND(AVG(target) * 100, 2) as conv_rate_pct,
    ROUND(AVG(target) / 0.0321, 2) as lift
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3_2_12212025`
GROUP BY score_tier
ORDER BY 
    CASE score_tier
        WHEN 'TIER_1_PRIME_MOVER' THEN 1
        WHEN 'TIER_2_PROVEN_MOVER' THEN 2
        WHEN 'TIER_3_MODERATE_BLEEDER' THEN 3
        WHEN 'TIER_4_EXPERIENCED_MOVER' THEN 4
        WHEN 'TIER_5_HEAVY_BLEEDER' THEN 5
        ELSE 6
    END;
```

#### 9.3 Verify Consolidated Tier 1
```sql
-- Confirm Tier 1 volume matches sum of original 1A + 1B + 1C
SELECT 
    'TIER_1_PRIME_MOVER' as tier,
    COUNT(*) as volume,
    SUM(target) as conversions,
    ROUND(AVG(target) * 100, 2) as conv_rate_pct,
    '(Should be ~225 leads, ~36 conversions, ~16%)' as expected
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3_2_12212025`
WHERE score_tier = 'TIER_1_PRIME_MOVER';
```

#### 9.4 Verify Model Version
```sql
SELECT DISTINCT model_version
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3_2_12212025`;
```
**Expected:** V3.2_12212025

#### 9.5 Verify Production View
```sql
SELECT COUNT(*) 
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3_current`;
```
**Expected:** Same count as main table

---

## üìä EXPECTED VALIDATION OUTPUT

After completing all steps, you should have:

### 1. BigQuery Table: `lead_scores_v3_2_12212025`
- ~39,448 leads scored
- 6 distinct tiers (5 priority + Standard)
- Model version: V3.2_12212025

### 2. Tier Performance Summary

| Tier | Volume | Conv Rate | Lift | 95% CI | Status |
|------|--------|-----------|------|--------|--------|
| **TIER_1_PRIME_MOVER** | 225 | 16.00% | 4.98x | 11.2% - 20.8% | ‚úÖ Significant |
| **TIER_2_PROVEN_MOVER** | 1,155 | 9.00% | 2.80x | 7.4% - 10.7% | ‚úÖ Significant |
| **TIER_3_MODERATE_BLEEDER** | 75 | 9.33% | 2.91x | 2.8% - 15.9% | ‚úÖ Significant |
| **TIER_4_EXPERIENCED_MOVER** | 117 | 11.97% | 3.73x | 6.1% - 17.9% | ‚úÖ Significant |
| **TIER_5_HEAVY_BLEEDER** | 623 | 7.38% | 2.30x | 5.3% - 9.4% | ‚úÖ Significant |
| **STANDARD** | 37,253 | 3.21% | 1.00x | 3.0% - 3.4% | Baseline |

### 3. Lead List Conversion Expectations

For a typical lead list with mixed tier distribution:
- **Priority tiers only:** Expect 9-12% conversion (3-4x baseline)
- **Tier 1 focused:** Expect 14-18% conversion (4-5x baseline)
- **Mixed list:** Use calculator formula for precise estimate

### 4. Files Created

| File | Location | Purpose |
|------|----------|---------|
| `phase_4_v3.2_12212025_consolidated.sql` | `sql/` | Tier logic SQL |
| `v3.2_12212025_validation_results.md` | `reports/` | Validation report |
| `v3.2_12212025_lead_list_calculator.md` | `reports/` | Conversion calculator |
| `phase_7_salesforce_sync_v3.2_12212025.sql` | `sql/` | SF sync query |

---

## üîÑ ROLLBACK PROCEDURE

If issues are discovered, rollback by:

```sql
-- Point production view back to previous version
CREATE OR REPLACE VIEW `savvy-gtm-analytics.ml_features.lead_scores_v3_current` AS
SELECT *
FROM `savvy-gtm-analytics.ml_features.lead_scores_v3`;  -- Original V3.2 table
```

---

## ‚úÖ COMPLETION CHECKLIST

- [ ] Step 1: Backup current SQL ‚úì
- [ ] Step 2: Create consolidated tier SQL ‚úì
- [ ] Step 3: Execute SQL in BigQuery ‚úì
- [ ] Step 4: Generate validation report ‚úì
- [ ] Step 5: Create lead list calculator ‚úì
- [ ] Step 6: Create production view ‚úì
- [ ] Step 7: Create Salesforce sync query ‚úì
- [ ] Step 8: Update execution log ‚úì
- [ ] Step 9: Run validation checklist ‚úì

---

**End of Cursor.ai Deployment Prompt**
